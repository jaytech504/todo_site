{% extends "todo/index.html" %}
{% load static %}
{%load crispy_forms_tags %}
{% block content %}
  <div class="todo-container">
        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <fieldset class="form-group">
                <legend class="border-bottom mb-4">New Todo</legend>
                <div class="form-group">
                <label for="title">Title</label>
                <input type="text" class="form-control" id="title" name="title"Ã  required>
            </div>
            <div class="form-group">
                <label for="details">Details</label>
            <textarea id="details" name="details" rows="8"class="form-control"></textarea>
            <ul id="details-preview"></ul>
            </fieldset>
            <div class="form-group">
                <button class="btn btn-outline-info" type="submit">Submit</button>
            </div>
        </form>
    </div>
    
<script>const detailsTextarea = document.getElementById('details');
        const detailsPreview = document.getElementById('details-preview');

        detailsTextarea.addEventListener('input', function() {
            const details = detailsTextarea.value.split('\n');
            detailsPreview.innerHTML = ''; // Clear the preview
            details.forEach(function(detail) {
                if (detail.trim()) {
                    const li = document.createElement('li');
                    const checkbox = document.createElement('input');
                    checkbox.type = 'checkbox';
                    li.appendChild(checkbox);
                    li.appendChild(document.createTextNode(detail)); // Add text to the checkbox
                    detailsPreview.appendChild(li);
                }
            });
        });
        
    </script>
    
{% endblock content %}